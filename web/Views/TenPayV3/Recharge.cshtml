@{
    ViewBag.Title = "预付充卡";
    Layout = null;
    //List<xftwl.Common.Card.CardIncomeRate> rates = new List<xftwl.Common.Card.CardIncomeRate>();
    //if (ViewData["IncomeRate"] != null)
    //{
    //    rates = ViewData["IncomeRate"] as List<xftwl.Common.Card.CardIncomeRate>;
    //}
    //var rate1 = rates.Find(o => o.Flag == "1");
    //var rate7 = rates.Find(o => o.Flag == "7");
    //var rate45 = rates.Find(o => o.Flag == "45");
    //var rate90 = rates.Find(o => o.Flag == "90");
    //var rate180 = rates.Find(o => o.Flag == "180");
    //var rate360 = rates.Find(o => o.Flag == "360");
}
@model Senparc.Weixin.MP.Sample.Models.Recharge
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta content="telephone=no" name="format-detection">
    <title>@ViewBag.Title</title>
    <link rel="stylesheet" href="/Content/css/recharge.css">
    <style>
        #bottomNav {
            background-color: #cc3333;
            border-top: 1px solid #993333;
            text-align: center;
            z-index: 999;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            line-height: 50px;
        }

            #bottomNav table {
                margin: 0 auto;
                color: #fff;
                font-size: 18px;
                text-align: center;
                width: 100%;
            }


            #bottomNav td {
                background: #cc3333;
                height: 50px;
                line-height: 50px;
            }

                #bottomNav td a {
                    color: white;
                    font-size: 18px;
                }

            #bottomNav a {
                border: 1px solid #fff;
                color: #fff;
                padding: 3px;
            }
    </style>
</head>

<body>

    @*<header class="header">
        <a href="javascript:void(0);" class="returnBtn"></a>
        <div class="topTit">
            <p><strong>充卡</strong></p>
        </div>
    </header>*@

    <section class="rechargeWrap">
        <div class="titHead02">
            <p>当前用户：@ViewData["TrueName"] ，账户余额：<em class="red04">@ViewData["Balance"]</em></p>
        </div>
        @using (Html.BeginForm("Recharge", "tenpayv3", FormMethod.Post, new { @class = "form-horizontal user_cz_form" }))
        {
            @Html.AntiForgeryToken()
            <div class="payment-money01 mt10">


                <div style="display: none;">
                    <span>提示：您正在为别人充卡 </span>
                </div>
                <div class="clearfix">
                    <div class="money-input01 cz_notset" style="width: 60%; float: left;">
                        <span>充值卡号：</span><div>
                            @if (string.IsNullOrWhiteSpace(Model.CardNo))
                            {
                                @Html.TextBoxFor(o => o.CardNo, new { @class = "card-cz" })
                            }
                            else
                            {
                                @Html.TextBoxFor(o => o.CardNo, new { @class = "card-cz", @readonly = "readonly" })
                            }
                        </div>
                    </div>
                    <div style="width: 30%; float: left;">
                        <a class="btn-cz">给别人充卡</a>
                    </div>
                </div>
                <div class="clearfix">
                    <div class="money-input01" style="margin-top: 20px;">
                        <span>充值金额：</span><div>
                            @Html.TextBoxFor(o => o.Money, new { @class = "money_price", type = "tel" })
                        </div>
                    </div>
                    <div class="low-money" style="display: none;">
                        <span>最低充卡数额100</span>
                    </div>
                </div>
                <div class="clearfix" style="margin-top: 20px;">
                    <div class="money-input01">
                        <span>类型：</span>
                        <div class="money_select01">

                            @Html.DropDownListFor(o => o.ListName, ViewData["Type"] as SelectList, new { @class = "form-control user_select col-xs-1", id = "xftb_select", style = "width:100%; padding:2px;" })
                            <span id="nhl_span"></span>
                        </div>
                    </div>
                </div>
                <div class="money-select01 money-change clearfix">
                    <ul>
                        <li>
                            <div><em>¥</em><span>500</span></div>
                        </li>
                        <li>
                            <div><em>¥</em><span>1000</span></div>
                        </li>
                        <li>
                            <div><em>¥</em><span>2000</span></div>
                        </li>
                        <li class="on" style="margin: 0;">
                            <div><em>¥</em><span>5000</span></div>
                        </li>
                    </ul>
                </div>

            </div>
            <div class="txtBox01">

                <input type="submit" value="立即充值" class="redBtn02" />
            </div>
        }
        <div class="chongzhi_tishi">
            <p><span>温馨提示</span>：活动期间，充年卡满5000，马上送价值2980元“天酝原浆”酒一坛（1500ml/坛，68%Vol），余额更享受高达18%年积分奖励。
</p>
        </div>
        <div class="kfBox01 mt10">
            <p>
                <a href="tel:4008227897" class="fl">客服热线：400-822-7897</a>
                <!--<a href="javascript:void(0);" class="fr">在线客服</a>会员充值资金直接通过银联系统进入银行存管账户，并接受商务局审核监管，确保了会员账户资金安全有保障。-->
            </p>
        </div>
    </section>
    @*<div id="bottomNav">
        <table border="0" width="100%" cellpadding="0" cellspacing="0">
            <tr>
                <td class="sy_foot_01"><a href="@Url.Action("RuHeZhuanQian", "xft")" target="_blank">如何赚钱</a></td>
                <td class="sy_foot_02"><a href="@Url.Action("Goods", "xft")" target="_blank">消费通商城</a></td>
                <td class="sy_foot_03"><a href="@Url.Action("newuserindex", "User")" target="_blank">会员中心</a></td>
            </tr>
        </table>
    </div>*@
    <script type="text/javascript" src="/Content/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">
        /*收益类型*/
        var $xftb_sec = $("#xftb_select");
        var op_val = $("#xftb_select").val();
        if (op_val == 7) {
            $("#nhl_span").text('“周卡”预付充值积分奖励为5%');
        }
        if (op_val == 90) {
            $("#nhl_span").text('“季卡”预付充值积分奖励为7%');
        }
        if (op_val == 360) {
            $("#nhl_span").text('“年卡”预付充值积分奖励为12%');
        }
        if (op_val == 366) {
            $("#nhl_span").text('“消费通券”预付充值积分奖励为12%');
        }
        $xftb_sec.change(function () {
            op_val = $(this).val();
            if (op_val == 7) {
                $("#nhl_span").text('“周卡”预付充值积分奖励为5%');
            }
            if (op_val == 90) {
                $("#nhl_span").text('“季卡”预付充值积分奖励为7%');
            }
            if (op_val == 360) {
                $("#nhl_span").text('“年卡”预付充值积分奖励为12%');
            }
            if (op_val == 366) {
                $("#nhl_span").text("可购买的消费通券数额为 @ViewBag.xftAmt,余额退款周期为366天,余额可消费,余额满10000可参与一次送手机活动 ");
                $("#Money").val(2000);
            }
        })


        //充值用户切换
        $(".btn-cz").click(function () {
            var btn_text = $(this).text();
            if (btn_text == '给别人充卡') {
                $(this).text("给自己充卡");
                $(".card-cz").val('');
                $(".card-cz").removeAttr("readonly");
                $(".card-cz").parent().parent().removeClass("cz_notset");
                $(".card-cz").parent().parent().addClass("cz_set");
                $(this).parent().parent().prev().css({ "display": "block", "color": "#d80204", "margin-bottom": "7px", "text-align": "right" });
            } else {
                $(this).text("给别人充卡");
                $(".card-cz").val('@ViewData["Card"]');
                $(".card-cz").attr("readonly", "readonly");
                $(".card-cz").parent().parent().removeClass("cz_set");
                $(".card-cz").parent().parent().addClass("cz_notset");
                $(this).parent().parent().prev().css("display", "none");
            }
        })

        //充值金额选取
        $(".money-change ul li").click(function () {
            $(this).addClass('on').siblings().removeClass('on');
            var value = $(this).find('span').text();
            $(".money_price").val(value);
        })


    </script>
</body>
</html>
