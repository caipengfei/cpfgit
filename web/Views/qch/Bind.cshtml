@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>微信登录</title>
    <link rel="stylesheet" href="/Content/css/reset.css">
    <link rel="stylesheet" href="/Content/css/WeChatLogin.css">
</head>
<body>
    <div id="header">
        <img src="/Content/image/logo.jpg" alt="">
    </div>
    <form id="form0" class="form-horizontal" method="post" action="/qch/bind" novalidate="novalidate">
        @*@Html.AntiForgeryToken()*@
        @Html.ValidationSummary(true)
        <div id="container">
            <img src="@ViewBag.Avator" alt="">
            <input type="text" class='number phone phone-1' placeholder="请输入您的电话号码">
            <input type="text" class="code validcode" placeholder="请输入验证码">
            <button type="button" class="button getvalidcode">获取验证码</button>
            <a href="javascript:" class="login">确认绑定</a>
            <a href="javascript:" class='concat'>关联新账号</a>
        </div>
    </form>
    <script src="/h5/js/jquery.min.js"></script>
    <script src="~/H5/js/util.js"></script>
    <script src="/h5/js/register.js"></script>
    <script src="~/Scripts/jquery.form.js"></script>

    <script type="text/javascript">
        var phone = $("#txtUserPhone").val();
        if (phone != '') {
            $("#txtUserPhone").attr('readonly', 'true');
        }
        function Save() {
            $("#form0").ajaxSubmit({
                type: 'POST',
                url: '/qch/bind',
                data: $("#form0").serialize(),
                beforeSubmit: function () {
                    //表单提交前
                    $('input').blur();
                    var $phone = $('.phone-1'); // 用户手机号

                    // 用户手机号验证
                    if (!validField($phone, regPhone, '手机号不能为空！', '用户手机号格式不正确！')) return false;
                },
                success: function (msg) {
                    util.msgBox(msg.Data);
                    if (msg.type == "success") {
                        location.href = '/'
                    }
                },
                error: function (data, status, e) {
                    util.msgBox('绑定出错:' + e);
                }

            });
        }

    </script>
</body>
</html>
